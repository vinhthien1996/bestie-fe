<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test Embed Script</title>
  <style>
    body { font-family: sans-serif; padding: 40px; background: #f8f8f8; }
    #test-container { margin-top: 32px; background: #fff; border: 1px solid #eee; border-radius: 8px; padding: 24px; min-height: 200px; }
    input, button { font-size: 16px; padding: 6px 12px; border-radius: 4px; border: 1px solid #ccc; }
    button { margin-left: 8px; }
  </style>
</head>
<body>
  <h2>Test Embed Script</h2>
  <div>
    <input id="script-input" type="text" style="width: 420px;" value='<script src="http://localhost:3000/embed.js?email=vinhthien1996@gmail.com"></script>' />
    <button onclick="renderScript()">Render</button>
  </div>
  <div id="test-container">
    <!-- Kết quả render sẽ ở đây -->
    <div id="bestie-product-list"></div>
  </div>
  <script>
    function renderScript() {
      const container = document.getElementById('test-container');
      const input = document.getElementById('script-input').value;
      // Xóa script cũ nếu có
      const oldScript = document.getElementById('embed-script');
      if (oldScript) oldScript.remove();
      // Xóa nội dung cũ
      document.getElementById('bestie-product-list').innerHTML = '';
      // Tạo script mới
      const script = document.createElement('script');
      script.id = 'embed-script';
      // Lấy src từ input
      const match = input.match(/src=["']([^"']+)["']/);
      if (match) {
        script.src = match[1];
        document.body.appendChild(script);
      } else {
        alert('Vui lòng nhập đúng thẻ <script src=...>');
      }
    }
  </script>
</body>
</html> 